<!doctype html><html lang=en-US><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://veekaybee.github.io/static/images/logo.png><title>What we don't talk about when we talk about building AI apps | ★❤✰ Vicki Boykis ★❤✰</title><meta name=title content="What we don't talk about when we talk about building AI apps"><meta name=description content="Deep learning and LLMs are messy"><meta name=keywords content><meta property="og:title" content="What we don't talk about when we talk about building AI apps"><meta property="og:description" content="Deep learning and LLMs are messy"><meta property="og:type" content="article"><meta property="og:url" content="https://veekaybee.github.io/2023/07/18/what-we-dont-talk-about-when-we-talk-about-building-ai-apps/"><meta property="og:image" content="https://veekaybee.github.io/images/logo.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-07-18T00:00:00+00:00"><meta property="article:modified_time" content="2023-07-18T00:00:00+00:00"><meta property="og:site_name" content="★ Vicki Boykis ★ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://veekaybee.github.io/images/logo.png"><meta name=twitter:title content="What we don't talk about when we talk about building AI apps"><meta name=twitter:description content="Deep learning and LLMs are messy"><meta name=twitter:site content="@vboykis"><meta itemprop=name content="What we don't talk about when we talk about building AI apps"><meta itemprop=description content="Deep learning and LLMs are messy"><meta itemprop=datePublished content="2023-07-18T00:00:00+00:00"><meta itemprop=dateModified content="2023-07-18T00:00:00+00:00"><meta itemprop=wordCount content="922"><meta itemprop=image content="https://veekaybee.github.io/images/logo.png"><meta itemprop=keywords content><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style><style type=text/css>h2{size:5px}</style></head><body><header><a href=/ class=title><h2>★❤✰ Vicki Boykis ★❤✰</h2></a><nav><a href=/>Tech Blog</a>
<a href=/essays>Essays</a>
<a href=/index.xml>Tech RSS</a>
<a href=https://boringml.com>Boring ML</a>
<a href=https://www.twitter.com/vboykis>Twitter</a>
<a href=https://www.github.com/veekaybee>GitHub</a>
<a href=/about>About</a></nav></header><main><h1>What we don't talk about when we talk about building AI apps</h1><p><i><time datetime=2023-07-18 pubdate>Jul 18 2023</time></i></p><content><p>Every day I open my LinkedIn and Twitter (and Mastodon and Bluesky and Threads&mldr;.) and am innundated with the same messages: LLMs are sent to us from above, they make everyone&rsquo;s life easier, we are quantizing and pruning, going faster, getting smaller, they will change education, they will write our poetry, they will outlive us all and overthrow humanity and build a happy fruitful LLM robot society, generating art and text, a society where humans exist solely to bring them cyberdrinks with small digital umbrellas.</p><p>I am currently building a <a href=https://viberary.pizza>semantic search application</a>, that doesn&rsquo;t use OpenAI, but uses the same architectural patterns as most vector search applications - a query tower that <a href=https://vickiboykis.com/what_are_embeddings/>encodes text to embeddings</a> and does KNN lookup against a model with pre-encoded vectors, returning the top semantically similar results by cosine similarity using <a href=https://www.sbert.net/>BERT sentence transformers.</a></p><p>From the technical perspective, here&rsquo;s what we don&rsquo;t discuss when we talk about deep learning applications. Or, more specifically, here are pain points I&rsquo;ve come across that I don&rsquo;t see being discussed a lot - if you are developing deep learning apps and don&rsquo;t have any of these issues, let me know which god you offered a sacrifice to in the woods under the pale light of the waning crescent:</p><ul><li>Docker images for anything involving deep learning with GPUs are enormous, sometimes as big as 10GB.<figure><img src=https://raw.githubusercontent.com/veekaybee/veekaybee.github.io/master/static/images/dockergpu.png width=600px></figure>.</li></ul><p>People spend an inordinate amount of time engineering these Docker images to work correctly in the cloud and on production environments</p><ul><li>These same images <a href=https://blog.allenai.org/python-caching-in-github-actions-e9452698e98d>take forever to start on CI runners</a> and as a result increase the iteration time of deep learning work, which is already very handwavey and as a result needs to be iterative</li></ul><figure><img src=https://raw.githubusercontent.com/veekaybee/veekaybee.github.io/master/static/images/ml_nondeterm.png width=600px></figure><p><a href=https://newsletter.abinoda.com/p/build-times-and-developer-productivity>Build times are one of the top productivity killers in 2023</a>, and deep learning is at the forefront of it.</p><ul><li><p>The amount <a href=https://timdettmers.com/2023/01/30/which-gpu-for-deep-learning/>you need to learn about CPUs/GPUs</a> is not insignificant and takes a long time on top of all the general MLE concerns: good modeling, ML architecture, data engineering, distributed systems, statistics, and monitoring.</p></li><li><p>If you are doing anything where you embed vectors in an n-dimensional dense space, you need to be mindful that the model you encode with and the model you run inference on have the same vector size. This might seem like a ridiculously obvious observation at first, but I&rsquo;ve now seen an entire category of silent failures because the query and lookup reference vector were not exactly the same size. It&rsquo;s equally important that the query and corpus vectors are encoded with the same model so that embedding lookup happens in the same embedding space, otherwise the results won&rsquo;t make sense.</p></li><li><p>Model artifact storage and versioning takes forever, even if you&rsquo;re using tooling. It&rsquo;s a pain to move around 5GB parquet files. This of course becomes easier once you have an ML platform and is exactly the reason many feature and model stores were developed but dealing with model artifacts generally is very clunky, particularly since we generally don&rsquo;t version control them.</p></li></ul><figure><img src=https://raw.githubusercontent.com/veekaybee/veekaybee.github.io/master/static/images/data_discovery.png width=600px></figure><ul><li>The speed with which anything in the deep learning ecosystem evolves, particularly in libraries like HuggingFace, combined with how hard it is to create reproducible Python environments when versions don&rsquo;t align leads to a <a href="https://news.ycombinator.com/item?id=20672201">special kind of dependency hell</a> that sometimes ensures the only good way to have a reproducible version of an environment is to freeze it in a docker image. I can&rsquo;t find the tweet anymore, but this is exactly what I saw someone suggest to do for academic papers published with Python so they remained reproducible long after the packages were no longer maintained.</li></ul><p>Which leads me to <a href="https://www.youtube.com/watch?v=I4wkCSd7iMM">more Docker issues</a>.</p><ul><li>When it works it&rsquo;s fantastic. But I just got an M2 machine which I thought I might be able to run encoding on to avoid <a href=https://vickiboykis.com/2022/07/26/how-to-prepare-an-aws-test-image-for-pytorch/>spinning up AWS images</a> and giving Jeff money, but everything broke because of the movement to arm64 architectures. For example, <a href=https://www.reddit.com/r/DSP/comments/dh25lq/intel_mkl_on_arm_hear_me_out/>MKL</a>, which I need for ONNX with Transformers Optum is Intel-only.</li></ul><p>If I do somehow get it to work, I&rsquo;ll need to develop two Docker images now: one for local development and one for my staging server that runs on DigitalOcean, which means more GitHub actions. And you can&rsquo;t test GitHub actions locally, anyway. <a href=https://github.com/nektos/act>Maybe kind of?</a> But not entirely.</p><p>I don&rsquo;t think I&rsquo;m alone here. My project is just a small hobby project, but the normcore problems of neural nets and LLMs in production are a whole genre of issues that are not getting coverage proportional to what people are actually experiencing. <a href=https://github.com/facebookresearch/metaseq/blob/main/projects/OPT/chronicles/OPT175B_Logbook.pdf>Just take a look at this logbook</a> of researchers training an LLM, OPT-175 at Meta, which reads like a thriller.</p><figure><img src=https://raw.githubusercontent.com/veekaybee/veekaybee.github.io/master/static/images/ops_edge.png width=600px></figure><p>This also doesn&rsquo;t include any of the traditional, normcore concerns of machine learning in production: concept drift, SLAs for large services, working with Kubernetes, guarantees of distributed systems, and YAML config file drift. Finally, we haven&rsquo;t talked at all about the UI involved for users navigating search bars and text boxes, which I&rsquo;ve spent just as much time thinking about as the model itself.</p><figure><img src=https://raw.githubusercontent.com/veekaybee/veekaybee.github.io/master/static/images/vibe_search.png width=600px></figure><p>I am not blaming anyone who develops in the ecosystem for these problems. Everyone is working with a <a href=https://vickiboykis.com/2022/12/05/the-cloudy-layers-of-modern-day-programming/>very deep and cloudy stack</a> and doing the best they can, particularly in the pressure cooker environment of open-source ML tooling that has only accelerated since the release of ChatGPT.</p><p>But I think it&rsquo;s important to talk about these issues publicly - they are not sexy and they are not LinkedIn-worthy, but these are the problems that make up our days and our lives on the bleeding edge.</p></content><p></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>